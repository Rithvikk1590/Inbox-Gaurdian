<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CSV Analysis â€” Inbox Guardian</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <style>
    pre {
      line-height: 1.25;
      font-size: 1rem;
      margin: 0;
    }
  </style>
</head>
<body>
  {% include 'includes/navbar.html' %}

  <!-- Header -->
  <section class="hero text-center py-3">
    <div class="d-flex justify-content-center align-items-center gap-3 mb-2">
      <div class="badge-box px-4 py-2 bg-white text-dark border rounded-2 shadow-sm">
        <strong>CSV Analysis Results</strong>
      </div>
    </div>
    <p class="text-secondary mb-0">Simple summary table of analysed CSV entries.</p>
  </section>

  <!-- Table Section -->
  <section class="container my-3">
    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th>Sender</th>
            <th>Subject</th>
            <th>Body</th>
            <th>Risk Score</th>
            <th>Verdict</th>
          </tr>
        </thead>
        <tbody>
          {% for r in rows %}
          <tr>
            <td class="text-break" style="max-width: 240px;">{{ r.sender }}</td>
            <td class="text-break" style="max-width: 280px;">{{ r.subject }}</td>
            <td class="text-break" style="max-width: 520px; white-space: pre-wrap;">{{ r.body }}</td>
            <td>
              <span class="badge
                {% if r.risk_score >= 60 %} bg-danger
                {% elif r.risk_score >= 25 %} bg-warning text-dark
                {% else %} bg-success
                {% endif %}">
                {{ r.risk_score }}
              </span>
            </td>
            <td>
              <span class="badge
                {% if r.verdict in ['Phishing', 'Likely Phishing', 'Likely phishing'] %} bg-danger
                {% elif r.verdict == 'Suspicious' %} bg-warning text-dark
                {% else %} bg-success
                {% endif %}">
                {{ r.verdict }}
              </span>
            </td>
          </tr>
          {% endfor %}
          {% if not rows %}
          <tr><td colspan="5" class="text-center text-secondary">No rows to display.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
</body>
</html>